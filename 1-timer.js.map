{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst query = {\n  text: document.querySelector('#datetime-picker'),\n  btnStart: document.querySelector('[data-start]'),\n\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n};\nquery.btnStart.disabled = true;\nlet userSelectedDate = null;\nlet timeInterval = null;\n\nquery.btnStart.addEventListener('click', onStart);\n\nfunction onStart() {\n  query.btnStart.disabled = true;\n  query.text.disabled = true;\n  timeInterval = setInterval(() => {\n    const remainingTime = userSelectedDate - Date.now();\n\n    if (remainingTime <= 0) {\n      clearInterval(timeInterval);\n      query.text.disabled = false;\n      query.text.value = '';\n      iziToast.success({\n        title: 'OK',\n        message: ' Time is up',\n        position: 'topRight',\n      });\n      return;\n    }\n    const timeArr = convertMs(remainingTime);\n    const { days, hours, minutes, seconds } = timeArr;\n    query.days.textContent = String(days).padStart(2, '0');\n    query.hours.textContent = String(hours).padStart(2, '0');\n    query.minutes.textContent = String(minutes).padStart(2, '0');\n    query.seconds.textContent = String(seconds).padStart(2, '0');\n\n    if (seconds <= 9) {\n      query.seconds.classList.add('last-secounds');\n    } else {\n      query.seconds.classList.remove('last-secounds');\n    }\n  }, 1000);\n}\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const selectedDate = selectedDates[0].getTime();\n\n    // Проверяем, не выбрана ли дата в прошлом\n    if (selectedDate <= Date.now()) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please choose a date in the future!',\n        position: 'topRight',\n        messageColor: '#fff',\n        backgroundColor: '#ef4040',\n        iconColor: '#fff',\n        titleColor: '#fff',\n        close: true,\n        closeColor: '#fff',\n      });\n      query.btnStart.disabled = true;\n      return;\n    }\n\n    userSelectedDate = selectedDate;\n    query.btnStart.disabled = false;\n  },\n};\n\nflatpickr(query.text, options);\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n"],"names":["query","userSelectedDate","timeInterval","onStart","remainingTime","iziToast","timeArr","convertMs","days","hours","minutes","seconds","options","selectedDates","selectedDate","flatpickr","ms"],"mappings":"+IAQA,MAAMA,EAAQ,CACZ,KAAM,SAAS,cAAc,kBAAkB,EAC/C,SAAU,SAAS,cAAc,cAAc,EAE/C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EACAA,EAAM,SAAS,SAAW,GAC1B,IAAIC,EAAmB,KACnBC,EAAe,KAEnBF,EAAM,SAAS,iBAAiB,QAASG,CAAO,EAEhD,SAASA,GAAU,CACjBH,EAAM,SAAS,SAAW,GAC1BA,EAAM,KAAK,SAAW,GACtBE,EAAe,YAAY,IAAM,CAC/B,MAAME,EAAgBH,EAAmB,KAAK,IAAG,EAEjD,GAAIG,GAAiB,EAAG,CACtB,cAAcF,CAAY,EAC1BF,EAAM,KAAK,SAAW,GACtBA,EAAM,KAAK,MAAQ,GACnBK,EAAS,QAAQ,CACf,MAAO,KACP,QAAS,cACT,SAAU,UAClB,CAAO,EACD,MACD,CACD,MAAMC,EAAUC,EAAUH,CAAa,EACjC,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKL,EAC1CN,EAAM,KAAK,YAAc,OAAOQ,CAAI,EAAE,SAAS,EAAG,GAAG,EACrDR,EAAM,MAAM,YAAc,OAAOS,CAAK,EAAE,SAAS,EAAG,GAAG,EACvDT,EAAM,QAAQ,YAAc,OAAOU,CAAO,EAAE,SAAS,EAAG,GAAG,EAC3DV,EAAM,QAAQ,YAAc,OAAOW,CAAO,EAAE,SAAS,EAAG,GAAG,EAEvDA,GAAW,EACbX,EAAM,QAAQ,UAAU,IAAI,eAAe,EAE3CA,EAAM,QAAQ,UAAU,OAAO,eAAe,CAEjD,EAAE,GAAI,CACT,CAEA,MAAMY,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EAAE,QAAO,EAG7C,GAAIC,GAAgB,KAAK,MAAO,CAC9BT,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sCACT,SAAU,WACV,aAAc,OACd,gBAAiB,UACjB,UAAW,OACX,WAAY,OACZ,MAAO,GACP,WAAY,MACpB,CAAO,EACDL,EAAM,SAAS,SAAW,GAC1B,MACD,CAEDC,EAAmBa,EACnBd,EAAM,SAAS,SAAW,EAC3B,CACH,EAEAe,EAAUf,EAAM,KAAMY,CAAO,EAE7B,SAASL,EAAUS,EAAI,CAQrB,MAAMR,EAAO,KAAK,MAAMQ,EAAK,KAAG,EAE1BP,EAAQ,KAAK,MAAOO,EAAK,MAAO,IAAI,EAEpCN,EAAU,KAAK,MAAQM,EAAK,MAAO,KAAQ,GAAM,EAEjDL,EAAU,KAAK,MAASK,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAR,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,QAAQ,IAAIJ,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}